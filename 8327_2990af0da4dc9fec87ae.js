/*! For license information please see 8327_2990af0da4dc9fec87ae.js.LICENSE.txt */
"use strict";(self.webpackChunkcode_cook=self.webpackChunkcode_cook||[]).push([[8327],{95166:(e,t,i)=>{i.d(t,{a:()=>u,b:()=>a,c:()=>h,g:()=>o});var n=i(50008),r=i.n(n),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var h=u((function(e){!function(){var t={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var a=arguments[n];if(a){var o=r()(a);if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)){if(a.length){var u=i.apply(null,a);u&&e.push(u)}}else if("object"===o)if(a.toString===Object.prototype.toString)for(var h in a)t.call(a,h)&&a[h]&&e.push(h);else e.push(a.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i}()}))},98327:(e,t,i)=>{i.r(t),i.d(t,{taro_picker_core:()=>w,taro_picker_group:()=>_});var n=i(65943),r=i(95166),a=function(e,t){for(var i=0,n=t.length,r=e.length;i<n;i++,r++)e[r]=t[i];return e};function o(e,t){for(var i=[],n=e;n<=t;n++)i.push((n<10?"0":"")+n);return i}var u=a(a(["20","21","22","23"],o(0,23)),["00","01","02","03"]),h=a(a(["56","57","58","59"],o(0,59)),["00","01","02","03"]);function s(e,t){return!isNaN(+e)&&e>=0&&e<t.length}function l(e){if(!/^\d{1,2}:\d{1,2}$/.test(e))return!1;var t=e.split(":").map((function(e){return+e}));return!(t[0]<0||t[0]>23||t[1]<0||t[1]>59)}function c(e,t){var i=e.split(":").map((function(e){return+e})),n=t.split(":").map((function(e){return+e}));return i[0]<n[0]||i[0]===n[0]&&i[1]<=n[1]}function d(e){if(!e)return!1;var t=new Date(e.replace(/-/g,"/"));return!isNaN(t.getMonth())&&t}function p(e){return Array.isArray(e)?e.map((function(e){return String(e)})):e}function g(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i}function f(e,t){return g(e,t)}function m(e,t,i){var n=1,r=12;return e.getFullYear()===i&&(n=e.getMonth()+1),t.getFullYear()===i&&(r=t.getMonth()+1),g(n,r)}function v(e,t,i,n){var r=1,a=function(e,t){return 4===t||6===t||9===t||11===t?30:2===t?e%4==0&&e%100!=0||e%400==0?29:28:31}(i,n);return e.getFullYear()===i&&e.getMonth()+1===n&&(r=e.getDate()),t.getFullYear()===i&&t.getMonth()+1===n&&(a=t.getDate()),g(r,a)}var y=102,k=34,w=function(){function e(e){var t=this;(0,n.r)(this,e),this.onChange=(0,n.c)(this,"change",7),this.onColumnChange=(0,n.c)(this,"columnchange",7),this.onCancel=(0,n.c)(this,"cancel",7),this.index=[],this.mode="selector",this.disabled=!1,this.range=[],this.start="",this.end="",this.fields="day",this.name="",this.pickerValue=[],this.height=[],this.hidden=!0,this.fadeOut=!1,this.isWillLoadCalled=!1,this.showPicker=function(){t.disabled||(t.height=t.getHeightByIndex(),t.hidden=!1)},this.getHeightByIndex=function(){return t.index.map((function(e){var i=0;return"time"===t.mode&&(i=136),y-k*e-i}))},this.hidePicker=function(){t.fadeOut=!0,setTimeout((function(){t.hidden=!0,t.fadeOut=!1}),350)},this.handleChange=function(){t.hidePicker(),t.index=t.height.map((function(e){return(y-e)/k}));var e=t.index.length&&"selector"!==t.mode?t.index:t.index[0];if("time"===t.mode){var i=[u.slice(),h.slice()],n=t.index.map((function(e,t){return i[t][e]}));t.index=n.map((function(e){return parseInt(e)})),e=n.join(":")}if("date"===t.mode){var r=t.pickerDate,a=r._start,o=r._end,s=r._updateValue,l=s[0],c=s[1],d=f(a.getFullYear(),o.getFullYear()),p=m(a,o,l),g=v(a,o,l,c),w=d[t.index[0]],_=p[t.index[1]],C=g[t.index[2]];e=(e="year"===t.fields?[w]:"month"===t.fields?[w,_]:[w,_,C]).map((function(e){return e<10?"0"+e:e})).join("-")}t.pickerValue=e,t.onChange.emit({value:e})},this.handleCancel=function(){t.hidePicker(),t.onCancel.emit()},this.updateHeight=function(e,i,n){void 0===n&&(n=!1);var r=a([],t.height);if(r[i]=e,t.height=r,n){var o=t,s=o.start,d=o.end;if(l(s)||(s="00:00"),l(d)||(d="23:59"),!c(s,d))return;var p=[u.slice(),h.slice()],g=t.height.map((function(e){return(y-e)/k})),f=g.map((function(e,t){return p[t][e]})).join(":");if(c(s,f)){if(!c(f,d)){var m=d.split(":").map((function(e){return y-k*(+e+4)}));requestAnimationFrame((function(){return t.height=m}))}}else{var v=s.split(":").map((function(e){return y-k*(+e+4)}));requestAnimationFrame((function(){return t.height=v}))}}},this.handleColumnChange=function(e,i){t.onColumnChange.emit({column:Number(i),value:(y-e)/k})},this.updateDay=function(e,i){var n=t.pickerDate,r=n._start,a=n._end,o=n._updateValue;o[i]=e;var u=o[0],h=o[1],s=o[2];if(0===i){var l=m(r,a,u),c=l[l.length-1],d=l[0];h>c&&(o[1]=c),h<d&&(o[1]=d);var p=l.indexOf(o[1]),g=y-k*p;t.updateDay(o[1],1),t.updateHeight(g,"1")}else if(1===i){var f=v(r,a,u,h);c=f[f.length-1],d=f[0],s>c&&(o[2]=c),s<d&&(o[2]=d),p=f.indexOf(o[2]),g=y-k*p,t.updateDay(o[2],2),t.updateHeight(g,"2")}},this.getSelector=function(){return(0,n.h)("taro-picker-group",{range:t.range,rangeKey:t.rangeKey,height:t.height[0],updateHeight:t.updateHeight,columnId:"0"})},this.getMultiSelector=function(){return t.range.map((function(e,i){return(0,n.h)("taro-picker-group",{range:e,rangeKey:t.rangeKey,height:t.height[i],updateHeight:t.updateHeight,onColumnChange:t.handleColumnChange,columnId:String(i)})}))},this.getTimeSelector=function(){var e=u.slice(),i=h.slice();return[(0,n.h)("taro-picker-group",{mode:"time",range:e,height:t.height[0],updateHeight:t.updateHeight,columnId:"0"}),(0,n.h)("taro-picker-group",{mode:"time",range:i,height:t.height[1],updateHeight:t.updateHeight,columnId:"1"})]},this.getDateSelector=function(){var e=t,i=e.fields,r=e.height,a=t.pickerDate,o=a._start,u=a._end,h=a._updateValue,s=h[0],l=h[1],c=f(o.getFullYear(),u.getFullYear()).map((function(e){return e+"年"})),d=m(o,u,s).map((function(e){return(e<10?"0"+e:e)+"月"})),p=v(o,u,s,l).map((function(e){return(e<10?"0"+e:e)+"日"})),g=[(0,n.h)("taro-picker-group",{mode:"date",range:c,height:r[0],updateDay:t.updateDay,updateHeight:t.updateHeight,columnId:"0"})];return"month"!==i&&"day"!==i||g.push((0,n.h)("taro-picker-group",{mode:"date",range:d,height:r[1],updateDay:t.updateDay,updateHeight:t.updateHeight,columnId:"1"})),"day"===i&&g.push((0,n.h)("taro-picker-group",{mode:"date",range:p,height:r[2],updateDay:t.updateDay,updateHeight:t.updateHeight,columnId:"2"})),g}}return e.prototype.componentWillLoad=function(){this.isWillLoadCalled=!0,this.handleProps()},e.prototype.componentDidLoad=function(){var e=this;Object.defineProperty(this.el,"value",{get:function(){return e.pickerValue},set:function(t){return e.value=t},configurable:!0}),this.overlay&&document.body.appendChild(this.overlay)},e.prototype.disconnectedCallback=function(){var e;this.overlay&&(null===(e=this.overlay.parentNode)||void 0===e||e.removeChild(this.overlay))},e.prototype.onPropsChange=function(){this.isWillLoadCalled&&this.handleProps()},e.prototype.handleProps=function(){var e=this,t=this,i=t.mode,n=t.start,r=t.end;if("selector"===i){var a=this.value;this.index=[s(a,this.range)?Math.floor(a):0]}else if("multiSelector"===i){var o=this.value;this.index=[],this.range.forEach((function(t,i){var n=null==o?void 0:o[i],r=s(n,t)?Math.floor(n):0;e.index.push(r)}))}else if("time"===i){l(a=this.value)||(console.warn("time picker value illegal"),a="0:0");var u=a.split(":").map((function(e){return+e}));this.index=u}else if("date"===i){var h=d(a=this.value)||new Date((new Date).setHours(0,0,0,0)),c=d(n)||new Date("1970/01/01"),p=d(r)||new Date("2999/01/01");if(!(h>=c&&h<=p))throw new Error("Date Interval Error");var g=h.getFullYear(),y=h.getMonth()+1,k=h.getDate(),w=f(c.getFullYear(),p.getFullYear()),_=m(c,p,g),C=v(c,p,g,y);this.index=[w.indexOf(g),_.indexOf(y),C.indexOf(k)],this.pickerDate&&this.pickerDate._value.getTime()===h.getTime()&&this.pickerDate._start.getTime()===c.getTime()&&this.pickerDate._end.getTime()===p.getTime()||(this.pickerDate={_value:h,_start:c,_end:p,_updateValue:[g,y,k]})}if(this.height=this.getHeightByIndex(),this.pickerValue=this.value,"date"===i){var D=this.pickerValue;"month"===this.fields?this.pickerValue=D.split("-").slice(0,2).join("-"):"year"===this.fields&&(this.pickerValue=D.split("-")[0])}},e.prototype.render=function(){var e,t=this,i=this,a=i.name,o=i.mode,u=i.fadeOut,h=i.hidden;switch(o){case"multiSelector":e=this.getMultiSelector();break;case"time":e=this.getTimeSelector();break;case"date":e=this.getDateSelector();break;default:e=this.getSelector()}var s=(0,r.c)("weui-mask","weui-animate-fade-in",{"weui-animate-fade-out":u}),l=(0,r.c)("weui-picker","weui-animate-slide-up",{"weui-animate-slide-down":u}),c=h?{display:"none"}:{};return(0,n.h)(n.H,null,(0,n.h)("div",{onClick:this.showPicker},(0,n.h)("slot",null),(0,n.h)("input",{type:"hidden",name:a,value:p(this.pickerValue)})),(0,n.h)("div",{class:"weui-picker__overlay",style:c,ref:function(e){t.overlay=e}},(0,n.h)("div",{class:s,onClick:this.handleCancel}),(0,n.h)("div",{class:l},(0,n.h)("div",{class:"weui-picker__hd"},(0,n.h)("div",{class:"weui-picker__action",onClick:this.handleCancel},"取消"),(0,n.h)("div",{class:"weui-picker__action",onClick:this.handleChange},"确定")),(0,n.h)("div",{class:"weui-picker__bd"},e),(0,n.h)("input",{type:"hidden",name:a,value:p(this.pickerValue)}))))},Object.defineProperty(e.prototype,"el",{get:function(){return(0,n.g)(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{mode:["onPropsChange"],value:["onPropsChange"],range:["onPropsChange"],start:["onPropsChange"],end:["onPropsChange"]}},enumerable:!1,configurable:!0}),e}();w.style=".weui-picker,.weui-picker__hd{font-size:12px}";var _=function(){function e(e){(0,n.r)(this,e),this.range=[]}return e.prototype.getPosition=function(){var e=this.touchEnd?.3:0,t="translate3d(0, "+this.height+"px, 0)",i="transform "+e+"s";return{transform:t,"-webkit-transform":t,transition:i,"-webkit-transition":i}},e.prototype.formulaUnlimitedScroll=function(e,t,i){var n=this,r=this,a=r.height,o=r.updateHeight,u=r.columnId,h="up"===i?1:-1;this.touchEnd=!1,o(-e*h*k+a,u),requestAnimationFrame((function(){n.touchEnd=!0;var i=Math.round(t/-34)+e*h;o(y-k*i,u,!0)}))},e.prototype.handleMoveStart=function(e){this.startY=e,this.preY=e,this.hadMove=!1},e.prototype.handleMoving=function(e){var t=e,i=t-this.preY;this.preY=t,this.touchEnd=!1,Math.abs(t-this.startY)>10&&(this.hadMove=!0);var n=this.height+i;"time"===this.mode&&("0"===this.columnId?(n>0&&(n=-816+i),n<-850&&(n=-34+i)):"1"===this.columnId&&(n>0&&(n=-2040+i),n<-2074&&(n=-34+i))),this.updateHeight(n,this.columnId)},e.prototype.handleMoveEnd=function(e){var t,i=this,n=i.mode,r=i.range,a=i.height,o=i.updateHeight,u=i.onColumnChange,h=i.columnId,s=-34*(r.length-1),l=e;if(this.touchEnd=!0,this.hadMove)t=a-y;else{var c=window.innerHeight;if(t=a-y-(l-(c-119)),"time"===n)if("0"===h){if(t>-85)return this.formulaUnlimitedScroll(24,t,"up");if(t<-969)return this.formulaUnlimitedScroll(24,t,"down")}else if("1"===h){if(t>-85)return this.formulaUnlimitedScroll(60,t,"up");if(t<-2193)return this.formulaUnlimitedScroll(60,t,"down")}}t>0&&(t=0),t<s&&(t=s);var d=Math.round(t/-34),p=y-k*d;"date"===this.mode&&("0"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),0),"1"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),1),"2"===this.columnId&&this.updateDay(+this.range[d].replace(/[^0-9]/gi,""),2)),o(p,h,"time"===n),u&&u(p,h)},e.prototype.onMouseDown=function(e){this.isMove=!0,this.handleMoveStart(e.clientY)},e.prototype.onMouseMove=function(e){e.preventDefault(),this.isMove&&this.handleMoving(e.clientY)},e.prototype.onMouseMoveEnd=function(e){this.isMove&&(this.isMove=!1,this.handleMoveEnd(e.clientY))},e.prototype.onTouchStart=function(e){this.handleMoveStart(e.changedTouches[0].clientY)},e.prototype.onTouchMove=function(e){e.preventDefault(),this.handleMoving(e.changedTouches[0].clientY)},e.prototype.onTouchEnd=function(e){this.handleMoveEnd(e.changedTouches[0].clientY)},e.prototype.render=function(){var e=this.range,t=this.rangeKey,i=e.map((function(e){var i=t?e[t]:e;return(0,n.h)("div",{class:"weui-picker__item"},i)}));return(0,n.h)(n.H,{class:"weui-picker__group"},(0,n.h)("div",{class:"weui-picker__mask"}),(0,n.h)("div",{class:"weui-picker__indicator"}),(0,n.h)("div",{class:"weui-picker__content",style:this.getPosition()},i))},e}()}}]);